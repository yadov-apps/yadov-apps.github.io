<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Плей-офф КХЛ 2025</title>
    <style>
        :root {
            --bg-color: #0e1621;
            --primary-color: #1c2a3a;
            --secondary-color: #263850;
            --accent-color: #e74c3c;
            --accent-hover: #c0392b;
            --text-color: #ecf0f1;
            --border-color: #34495e;
            --hover-color: #2980b9;
            --connector-color: #ffffff;
            --connector-width: 2px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background: linear-gradient(135deg, var(--bg-color) 0%, #131e2c 100%);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        
        header {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            padding: 25px 0;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('/api/placeholder/1200/200') center/cover;
            opacity: 0.1;
            z-index: 0;
        }
        
        header h1 {
            position: relative;
            z-index: 1;
            margin: 0;
            font-size: 2.5rem;
            color: var(--text-color);
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        h2 {
            text-align: center;
            margin: 25px 0;
            color: var(--text-color);
            letter-spacing: 2px;
            font-size: 1.8rem;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }
        
        .tournament-info {
            background: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            text-align: center;
            line-height: 1.6;
        }
        
        .tournament-info p {
            margin: 10px 0;
            font-size: 1.1rem;
        }

        .bracket-container {
            display: flex;
            justify-content: space-between;
            position: relative;
            padding: 20px 0;
            margin-bottom: 30px;
        }
        
        .round {
            display: flex;
            flex-direction: column;
            min-width: 240px;
            margin: 0 30px;
            position: relative;
            z-index: 1;
        }
        
        .round-title {
            text-align: center;
            font-weight: bold;
            margin-bottom: 25px;
            padding: 12px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            font-size: 1.2rem;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }
        
        .round-title::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 30%;
            height: 100%;
            background: linear-gradient(to right, rgba(255, 255, 255, 0.1), transparent);
            transform: skewX(-25deg);
        }

        /* Улучшенное позиционирование матчей */
        #round1 {
            display: flex;
            flex-direction: column;
        }

        #round2-matches, #semifinal-matches, #final-match {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            height: 100%;
        }

        /* Распределение пространства для второго раунда */
        #round2 {
            display: flex;
            flex-direction: column;
            justify-content: space-around;
        }

        #round2 .match-container:nth-child(1) {
            margin-top: 40px;
        }
        #round2 .match-container:nth-child(2) {
            margin-top: 70px;
        }
        #round2 .match-container:nth-child(3) {
            margin-top: 125px;
        }
        #round2 .match-container:nth-child(4) {
            margin-top: 70px;
        }

        /* Специальные правила для полуфинала */
        #semifinal {
            display: flex;
            flex-direction: column;
        }

        #semifinal .match-container:nth-child(1) {
            margin-top: 130px;
        }
        #semifinal .match-container:nth-child(2) {
            margin-top: 200px;
        }

        /* Специальные правила для финала */
        #final {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        #final-match {
            margin-top: 240px; /* Центрирование относительно полуфиналов */
            height: 30%;
        }
        #final .match-container:nth-child(1) {
            margin-top: 200px;
            margin-bottom: 600px;
        }
        
        .match-container {
            flex: 0 0 auto;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 120px;
            margin-bottom: 40px;
            position: relative;
        }
        
        .team-card {
            background: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 0;
            margin: 5px 0;
            cursor: pointer;
            transition: all 0.3s ease, transform 0.2s ease;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
            height: 80px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .team-card:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            border-color: var(--hover-color);
        }
        
        .team-card.selected {
            border-color: var(--accent-color);
            background: linear-gradient(to right, rgba(231, 76, 60, 0.2), var(--primary-color));
            box-shadow: 0 0 15px rgba(231, 76, 60, 0.5);
            transform: translateY(-3px) scale(1.02);
        }
        
        .team-card.selected::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(231, 76, 60, 0.1), transparent);
            animation: shine 1.5s infinite;
        }
        
        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        /* Улучшенные стили для логотипов */
        .team-logo {
            width: 60px;
            height: 60px;
            min-width: 60px; /* Предотвращает сжатие */
            background-color: white;
            border-radius: 8px;
            margin: 10px;
            object-fit: contain;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
        }
        
        .team-info {
            flex: 1;
            padding: 0 10px;
        }
        
        .team-name {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 3px;
        }
        
        .team-seed {
            background-color: var(--primary-color);
            color: var(--text-color);
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.9rem;
            font-weight: bold;
            margin-right: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Connectors */
        .connectors {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .connector {
            position: absolute;
            background-color: var(--connector-color);
        }
        
        .horizontal-connector {
            height: var(--connector-width);
        }
        
        .vertical-connector {
            width: var(--connector-width);
        }
        
        .champion-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 30px;
            transition: all 0.5s ease;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .champion-container.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .champion-card {
            background: linear-gradient(45deg, var(--accent-color), #d35400);
            border: 3px solid gold;
            border-radius: 12px;
            padding: 25px 40px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(231, 76, 60, 0.5);
            position: relative;
            overflow: hidden;
            max-width: 600px;
            width: 100%;
        }
        
        .champion-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, transparent 30%, rgba(0, 0, 0, 0.2) 70%);
        }
        
        .champion-title {
            font-size: 1.6rem;
            margin-bottom: 15px;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            position: relative;
        }
        
        .champion-name {
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            position: relative;
            letter-spacing: 1px;
        }
        
        .champion-logo {
            width: 120px;
            height: 120px;
            background-color: white;
            border-radius: 8px;
            margin: 15px auto;
            object-fit: contain;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            border: 2px solid gold;
        }

        .conference-title {
            font-size: 1.3rem;
            color: var(--accent-color);
            margin-bottom: 15px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
        }
        
        .conference-title::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 2px;
            background-color: var(--accent-color);
        }

        .west-conference, .east-conference {
            margin-bottom: 50px;
            position: relative;
        }

        #semifinal .round-title {
            background: linear-gradient(to right, var(--accent-color), var(--accent-hover));
            color: var(--bg-color);
        }

        #final .round-title {
            background: linear-gradient(to right, gold, #f39c12);
            color: var(--bg-color);
        }

        .reset-btn {
            display: block;
            margin: 30px auto;
            padding: 12px 25px;
            background: linear-gradient(to right, var(--accent-color), var(--accent-hover));
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
        }

        .reset-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }
        
        .reset-btn:active {
            transform: translateY(1px);
        }

        footer {
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            text-align: center;
            padding: 20px 0;
            margin-top: 30px;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        footer p {
            margin: 0;
            font-size: 1rem;
            letter-spacing: 1px;
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 1400px) {
            .bracket-container {
                flex-direction: column;
                align-items: center;
            }
            
            .round {
                width: 90%;
                margin-bottom: 40px;
                min-width: auto;
            }
            
            /* Сбрасываем специальные позиционирования в мобильном виде */
            #round2 .match-container,
            #semifinal .match-container {
                margin-top: 0;
            }
            
            #final-match {
                margin-top: 0;
            }
            
            .connectors {
                display: none;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Плей-офф КХЛ 2025</h1>
    </header>
    
    <div class="container">
        <div class="tournament-info">
            <p>Интерактивный браузер плей-офф КХЛ. Выберите победителей матчей нажатием на команду, чтобы увидеть, как будет развиваться турнирная сетка.</p>
            <p>В первом раунде команды своих конференций играют между собой (1-8, 2-7, 3-6, 4-5). Во втором раунде команды играют с противоположной конференцией, где высшее место запада играет с низшим местом востока.</p>
        </div>
        
        <h2>Сетка плей-офф КХЛ 2025</h2>
        
        <div class="bracket-container" id="bracket-container">
            <div class="connectors" id="connectors"></div>
            
            <div class="round" id="round1">
                <div class="round-title">Первый раунд</div>
                
                <div class="west-conference">
                    <div class="conference-title">Западная конференция</div>
                    
                    <div class="match-container" id="west-match1">
                        <div class="team-card" data-team="Локомотив" data-seed="1" data-conference="west" data-logo="https://img.championat.com/team/logo/14672244642043297304.pnghttps://img.championat.com/team/logo/14672244642043297304.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/14672244642043297304.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Локомотив</div>
                            </div>
                            <div class="team-seed">1</div>
                        </div>
                        <div class="team-card" data-team="Торпедо" data-seed="8" data-conference="west" data-logo="https://img.championat.com/team/logo/16595213011902504395.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/16595213011902504395.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Торпедо</div>
                            </div>
                            <div class="team-seed">8</div>
                        </div>
                    </div>
                    
                    <div class="match-container" id="west-match2">
                        <div class="team-card" data-team="Динамо Минск" data-seed="4" data-conference="west" data-logo="https://img.championat.com/team/logo/1599168923970583304.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/1599168923970583304.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Динамо Минск</div>
                            </div>
                            <div class="team-seed">4</div>
                        </div>
                        <div class="team-card" data-team="ЦСКА" data-seed="5" data-conference="west" data-logo="https://img.championat.com/team/logo/1521881177909853135.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/1521881177909853135.png')"></div>
                            <div class="team-info">
                                <div class="team-name">ЦСКА</div>
                            </div>
                            <div class="team-seed">5</div>
                        </div>
                    </div>
                    
                    <div class="match-container" id="west-match3">
                        <div class="team-card" data-team="Динамо Москва" data-seed="2" data-conference="west" data-logo="https://img.championat.com/team/logo/16012025222113898731.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/16012025222113898731.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Динамо Москва</div>
                            </div>
                            <div class="team-seed">2</div>
                        </div>
                        <div class="team-card" data-team="СКА" data-seed="7" data-conference="west" data-logo="https://img.championat.com/team/logo/14873435512073686720.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/14873435512073686720.png')"></div>
                            <div class="team-info">
                                <div class="team-name">СКА</div>
                            </div>
                            <div class="team-seed">7</div>
                        </div>
                    </div>
                    
                    <div class="match-container" id="west-match4">
                        <div class="team-card" data-team="Спартак" data-seed="3" data-conference="west" data-logo="https://img.championat.com/team/logo/14751955781691057475.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/14751955781691057475.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Спартак</div>
                            </div>
                            <div class="team-seed">3</div>
                        </div>
                        <div class="team-card" data-team="Северсталь" data-seed="6" data-conference="west" data-logo="https://img.championat.com/team/logo/1567605618721285972.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/1567605618721285972.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Северсталь</div>
                            </div>
                            <div class="team-seed">6</div>
                        </div>
                    </div>
                </div>
                
                <div class="east-conference">
                    <div class="conference-title">Восточная конференция</div>
                    
                    <div class="match-container" id="east-match1">
                        <div class="team-card" data-team="Трактор" data-seed="1" data-conference="east" data-logo="https://img.championat.com/team/logo/1599168674938052532.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/1599168674938052532.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Трактор</div>
                            </div>
                            <div class="team-seed">1</div>
                        </div>
                        <div class="team-card" data-team="Адмирал" data-seed="8" data-conference="east" data-logo="https://img.championat.com/team/logo/16286243751094737454.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/16286243751094737454.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Адмирал</div>
                            </div>
                            <div class="team-seed">8</div>
                        </div>
                    </div>
                    
                    <div class="match-container" id="east-match2">
                        <div class="team-card" data-team="Ак Барс" data-seed="4" data-conference="east" data-logo="https://img.championat.com/team/logo/1659212829479270640.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/1659212829479270640.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Ак Барс</div>
                            </div>
                            <div class="team-seed">4</div>
                        </div>
                        <div class="team-card" data-team="Автомобилист" data-seed="5" data-conference="east" data-logo="https://img.championat.com/team/logo/1467223858948139818.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/1467223858948139818.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Автомобилист</div>
                            </div>
                            <div class="team-seed">5</div>
                        </div>
                    </div>
                    
                    <div class="match-container" id="east-match3">
                        <div class="team-card" data-team="Салават Юлаев" data-seed="2" data-conference="east" data-logo="https://img.championat.com/team/logo/15991690491391188139.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/15991690491391188139.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Салават Юлаев</div>
                            </div>
                            <div class="team-seed">2</div>
                        </div>
                        <div class="team-card" data-team="Сибирь" data-seed="7" data-conference="east" data-logo="https://img.championat.com/team/logo/15355414511422027013.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/15355414511422027013.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Сибирь</div>
                            </div>
                            <div class="team-seed">7</div>
                        </div>
                    </div>
                    
                    <div class="match-container" id="east-match4">
                        <div class="team-card" data-team="Металлург Мг" data-seed="3" data-conference="east" data-logo="https://img.championat.com/team/logo/14873432861635035570.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/14873432861635035570.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Металлург Мг</div>
                            </div>
                            <div class="team-seed">3</div>
                        </div>
                        <div class="team-card" data-team="Авангард" data-seed="6" data-conference="east" data-logo="https://img.championat.com/team/logo/15359727361725323564.png" onclick="selectWinner(this)">
                            <div class="team-logo" style="background-image: url('https://img.championat.com/team/logo/15359727361725323564.png')"></div>
                            <div class="team-info">
                                <div class="team-name">Авангард</div>
                            </div>
                            <div class="team-seed">6</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="round" id="round2">
                <div class="round-title">Второй раунд</div>
                <div id="round2-matches"></div>
            </div>
            
            <div class="round" id="semifinal">
                <div class="round-title">Полуфинал</div>
                <div id="semifinal-matches"></div>
            </div>
            
            <div class="round" id="final">
                <div class="round-title">Финал</div>
                <div id="final-match"></div>
                
                <!-- Добавляем изображение кубка -->
                <div style="text-align: center; margin-top: 30px;">
                    <img src="https://img.championat.com/tournir/17370121091679617527.png" alt="Кубок Гагарина" style="max-height: 180px; filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));">
                </div>
            </div>
        </div>
        
        <div class="champion-container" id="champion-container">
            <div class="champion-card">
                <div class="champion-title">Чемпион КХЛ 2025</div>
                <div class="champion-logo" id="champion-logo" style="background-image: url('/api/placeholder/120/120')"></div>
                <div class="champion-name" id="champion-name">Ожидание...</div>
            </div>
        </div>
        
        <button class="reset-btn" onclick="resetBracket()">Сбросить все выборы</button>
    </div>
    
    <footer>
        <p>Интерактивный браузер плей-офф КХЛ 2025</p>
    </footer>

    <script>
        // Глобальные переменные для хранения прогресса турнира
        let rounds = {
            1: {
                west: Array(4).fill(null),
                east: Array(4).fill(null)
            },
            2: Array(4).fill(null),
            3: Array(2).fill(null),
            4: null
        };
        
        // Функция для создания пустых матчей второго раунда
        function createEmptyRound2() {
            const round2Container = document.getElementById('round2-matches');
            round2Container.innerHTML = '';
            
            for (let i = 1; i <= 4; i++) {
                const matchContainer = document.createElement('div');
                matchContainer.className = 'match-container';
                matchContainer.id = `round2-match${i}`;
                
                // Добавляем пустые заполнители команд
                for (let j = 0; j < 2; j++) {
                    const teamCard = document.createElement('div');
                    teamCard.className = 'team-card empty';
                    teamCard.setAttribute('data-round', '2');
                    teamCard.setAttribute('data-match', i);
                    
                    teamCard.innerHTML = `
                        <div class="team-logo" style="background-image: url('/api/placeholder/60/60')"></div>
                        <div class="team-info">
                            <div class="team-name">Ожидание...</div>
                        </div>
                        <div class="team-seed">-</div>
                    `;
                    
                    matchContainer.appendChild(teamCard);
                }
                
                round2Container.appendChild(matchContainer);
            }
        }
        
        // Функция для создания пустых полуфинальных матчей
        function createEmptySemifinals() {
            const semifinalContainer = document.getElementById('semifinal-matches');
            semifinalContainer.innerHTML = '';
            
            for (let i = 1; i <= 2; i++) {
                const matchContainer = document.createElement('div');
                matchContainer.className = 'match-container';
                matchContainer.id = `semifinal-match${i}`;
                
                // Добавляем пустые заполнители команд
                for (let j = 0; j < 2; j++) {
                    const teamCard = document.createElement('div');
                    teamCard.className = 'team-card empty';
                    teamCard.setAttribute('data-round', '3');
                    teamCard.setAttribute('data-match', i);
                    
                    teamCard.innerHTML = `
                        <div class="team-logo" style="background-image: url('/api/placeholder/60/60')"></div>
                        <div class="team-info">
                            <div class="team-name">Ожидание...</div>
                        </div>
                        <div class="team-seed">-</div>
                    `;
                    
                    matchContainer.appendChild(teamCard);
                }
                
                semifinalContainer.appendChild(matchContainer);
            }
        }
        
        // Функция для создания пустого финального матча
        function createEmptyFinal() {
            const finalContainer = document.getElementById('final-match');
            finalContainer.innerHTML = '';
            
            const matchContainer = document.createElement('div');
            matchContainer.className = 'match-container';
            matchContainer.id = 'final-match';
            
            // Добавляем пустые заполнители команд
            for (let j = 0; j < 2; j++) {
                const teamCard = document.createElement('div');
                teamCard.className = 'team-card empty';
                teamCard.setAttribute('data-round', '4');
                teamCard.setAttribute('data-match', '1');
                
                teamCard.innerHTML = `
                    <div class="team-logo" style="background-image: url('/api/placeholder/60/60')"></div>
                    <div class="team-info">
                        <div class="team-name">Ожидание...</div>
                    </div>
                    <div class="team-seed">-</div>
                `;
                
                matchContainer.appendChild(teamCard);
            }
            
            finalContainer.appendChild(matchContainer);
        }
        
        // Функция для отрисовки соединительных линий
        function drawConnectors() {
            const container = document.getElementById('connectors');
            container.innerHTML = '';
            
            // Если окно слишком узкое, не рисуем соединители
            if (window.innerWidth < 1400) {
                return;
            }
            
            const rounds = document.querySelectorAll('.round');
            
            // Соединяем матчи первого и второго раунда
            if (rounds.length >= 2) {
                drawRoundConnectors(rounds[0], rounds[1], 8, 4);
            }
            
            // Соединяем матчи второго раунда и полуфинала
            if (rounds.length >= 3) {
                drawRoundConnectors(rounds[1], rounds[2], 4, 2);
            }
            
            // Соединяем матчи полуфинала и финала
            if (rounds.length >= 4) {
                drawRoundConnectors(rounds[2], rounds[3], 2, 1);
            }
            
            // Добавляем центральную вертикальную линию для финала
            if (rounds.length >= 4) {
                const finalMatch = rounds[3].querySelector('.match-container');
                const finalRect = finalMatch.getBoundingClientRect();
                const containerRect = document.getElementById('bracket-container').getBoundingClientRect();
                const finalMidY = finalRect.top + finalRect.height / 2 - containerRect.top;
                
                // Центральная вертикальная линия
                const centralVConnector = document.createElement('div');
                centralVConnector.className = 'connector vertical-connector';
                centralVConnector.style.top = `${finalMidY - 40}px`; // Высота над матчем
                centralVConnector.style.left = `${finalRect.right - containerRect.left + 30}px`;
                centralVConnector.style.height = `80px`; // Высота линии
                container.appendChild(centralVConnector);
                
                // Горизонтальная линия к трофею
                const trophyHConnector = document.createElement('div');
                trophyHConnector.className = 'connector horizontal-connector';
                trophyHConnector.style.top = `${finalMidY - 40}px`;
                trophyHConnector.style.left = `${finalRect.right - containerRect.left + 30}px`;
                trophyHConnector.style.width = `40px`;
                container.appendChild(trophyHConnector);
            }
        }
        
        // Функция для рисования соединителей между раундами
        function drawRoundConnectors(fromRound, toRound, fromMatches, toMatches) {
            const fromRect = fromRound.getBoundingClientRect();
            const toRect = toRound.getBoundingClientRect();
            const containerRect = document.getElementById('bracket-container').getBoundingClientRect();
            
            const fromMatchContainers = fromRound.querySelectorAll('.match-container');
            const toMatchContainers = toRound.querySelectorAll('.match-container');
            
            // Группируем матчи для создания соединителей
            for (let i = 0; i < toMatches; i++) {
                const toMatch = toMatchContainers[i];
                const toRect = toMatch.getBoundingClientRect();
                const toMidY = toRect.top + toRect.height / 2 - containerRect.top;
                
                // Каждый матч следующего раунда соединяется с двумя матчами предыдущего
                const startIdx = i * (fromMatches / toMatches);
                const endIdx = startIdx + (fromMatches / toMatches) - 1;
                
                for (let j = startIdx; j <= endIdx; j++) {
                    const fromMatch = fromMatchContainers[j];
                    const fromRect = fromMatch.getBoundingClientRect();
                    const fromMidY = fromRect.top + fromRect.height / 2 - containerRect.top;
                    
                    // Горизонтальная линия от матча первого раунда
                    const hConnector1 = document.createElement('div');
                    hConnector1.className = 'connector horizontal-connector';
                    hConnector1.style.top = `${fromMidY}px`;
                    hConnector1.style.left = `${fromRect.right - containerRect.left}px`;
                    hConnector1.style.width = `${(toRect.left - fromRect.right) / 2}px`;
                    container.appendChild(hConnector1);
                    
                    // Вертикальная линия соединяющая матчи
                    const vConnector = document.createElement('div');
                    vConnector.className = 'connector vertical-connector';
                    const vTop = Math.min(fromMidY, toMidY);
                    const vHeight = Math.abs(fromMidY - toMidY);
                    vConnector.style.top = `${vTop}px`;
                    vConnector.style.left = `${fromRect.right - containerRect.left + (toRect.left - fromRect.right) / 2}px`;
                    vConnector.style.height = `${vHeight}px`;
                    container.appendChild(vConnector);
                    
                    // Горизонтальная линия к матчу следующего раунда
                    const hConnector2 = document.createElement('div');
                    hConnector2.className = 'connector horizontal-connector';
                    hConnector2.style.top = `${toMidY}px`;
                    hConnector2.style.left = `${fromRect.right - containerRect.left + (toRect.left - fromRect.right) / 2}px`;
                    hConnector2.style.width = `${(toRect.left - fromRect.right) / 2}px`;
                    container.appendChild(hConnector2);
                }
            }
        }
        
        // Функция выбора победителя
        function selectWinner(element) {
            // Если элемент уже пустой (placeholder), то ничего не делаем
            if (element.classList.contains('empty')) {
                return;
            }
            
            const parent = element.parentNode;
            const teamCards = parent.querySelectorAll('.team-card');
            
            // Убираем класс selected у всех команд в матче
            teamCards.forEach(card => {
                card.classList.remove('selected');
            });
            
            // Добавляем класс selected выбранной команде
            element.classList.add('selected');
            
            // Получаем информацию о команде
            const teamName = element.querySelector('.team-name').textContent;
            const teamSeed = parseInt(element.getAttribute('data-seed'));
            const teamConference = element.getAttribute('data-conference');
            
            // Получаем правильный URL логотипа из стиля элемента
            const teamLogoDiv = element.querySelector('.team-logo');
            const computedStyle = window.getComputedStyle(teamLogoDiv);
            const backgroundImage = computedStyle.backgroundImage;
            const teamLogo = backgroundImage.replace(/url\(['"](.+)['"]\)/, '$1');
            
            const teamData = {
                name: teamName,
                seed: teamSeed,
                conference: teamConference,
                logo: teamLogo
            };
            
            // Определяем, к какому раунду относится матч
            if (parent.id.startsWith('west-match') || parent.id.startsWith('east-match')) {
                // Первый раунд
                const conference = teamConference;
                const matchIndex = parseInt(parent.id.split('match')[1]) - 1;
                
                // Сохраняем победителя
                rounds[1][conference][matchIndex] = teamData;
                
                // Переходим к формированию второго раунда
                updateRound2();
            } else {
                // Другие раунды
                const roundId = element.closest('.round').id;
                let roundNum = 0;
                
                if (roundId === 'round2') roundNum = 2;
                else if (roundId === 'semifinal') roundNum = 3;
                else if (roundId === 'final') roundNum = 4;
                
                const matchId = parent.id;
                const matchIndex = parseInt(matchId.split('-match')[1]) - 1;
                
                // Сохраняем победителя
                if (roundNum === 2) {
                    rounds[2][matchIndex] = teamData;
                    updateRound3();
                } else if (roundNum === 3) {
                    rounds[3][matchIndex] = teamData;
                    updateFinal();
                } else if (roundNum === 4) {
                    rounds[4] = teamData;
                    showChampion();
                }
            }
            
            // Перерисовываем соединительные линии
            setTimeout(drawConnectors, 100);
        }
        
        // Функция обновления второго раунда
        function updateRound2() {
            // Проверяем, достаточно ли победителей первого раунда
            const westWinners = rounds[1].west.filter(Boolean);
            const eastWinners = rounds[1].east.filter(Boolean);
            
            // Если победители определены не во всех матчах, выходим
            if (westWinners.length < 4 || eastWinners.length < 4) {
                return;
            }
            
            // Сортируем победителей по посеву
            const sortedWestWinners = [...westWinners].sort((a, b) => a.seed - b.seed);
            const sortedEastWinners = [...eastWinners].sort((a, b) => a.seed - b.seed);
            
            // Второй раунд: команды играют с противоположной конференцией
            // Высший посев запада играет с низшим посевом востока и т.д.
            const match1 = [sortedWestWinners[0], sortedEastWinners[3]]; // Запад #1 vs Восток #4
            const match2 = [sortedWestWinners[1], sortedEastWinners[2]]; // Запад #2 vs Восток #3
            const match3 = [sortedEastWinners[0], sortedWestWinners[3]]; // Восток #1 vs Запад #4
            const match4 = [sortedEastWinners[1], sortedWestWinners[2]]; // Восток #2 vs Запад #3
            
            // Создаем контейнеры для второго раунда, если их еще нет
            if (!document.getElementById('round2-match1')) {
                createEmptyRound2();
            }
            
            // Обновляем интерфейс
            updateMatchCards('round2-match1', match1);
            updateMatchCards('round2-match2', match2);
            updateMatchCards('round2-match3', match3);
            updateMatchCards('round2-match4', match4);
        }
        
        // Функция обновления третьего раунда (полуфинал)
        function updateRound3() {
            // Проверяем, достаточно ли победителей второго раунда
            const round2Winners = rounds[2].filter(Boolean);
            
            // Если победители определены не во всех матчах, выходим
            if (round2Winners.length < 4) {
                return;
            }
            
            // В полуфинале победители первых двух матчей играют друг с другом,
            // а победители третьего и четвёртого матчей - между собой
            const match1 = [round2Winners[0], round2Winners[1]];
            const match2 = [round2Winners[2], round2Winners[3]];
            
            // Создаем контейнеры для полуфиналов, если их еще нет
            if (!document.getElementById('semifinal-match1')) {
                createEmptySemifinals();
            }
            
            // Обновляем интерфейс
            updateMatchCards('semifinal-match1', match1);
            updateMatchCards('semifinal-match2', match2);
        }
        
        // Функция обновления финала
        function updateFinal() {
            // Проверяем, достаточно ли победителей полуфинала
            const round3Winners = rounds[3].filter(Boolean);
            
            // Если победители определены не во всех матчах, выходим
            if (round3Winners.length < 2) {
                return;
            }
            
            // В финале встречаются победители полуфиналов
            const match = [round3Winners[0], round3Winners[1]];
            
            // Создаем контейнер для финала, если его еще нет
            if (!document.getElementById('final-match').querySelector('.match-container')) {
                createEmptyFinal();
            }
            
            // Обновляем интерфейс
            updateMatchCards('final-match', match);
        }
        
        // Функция отображения чемпиона
        function showChampion() {
            if (!rounds[4]) {
                return;
            }
            
            document.getElementById('champion-container').classList.add('show');
            document.getElementById('champion-name').textContent = rounds[4].name;
            document.getElementById('champion-logo').style.backgroundImage = `url('${rounds[4].logo}')`;
        }
        
        // Функция обновления карточек матча
        function updateMatchCards(matchId, teams) {
            const matchElement = document.getElementById(matchId);
            const teamCards = matchElement.querySelectorAll('.team-card');
            
            // Обновляем информацию о командах
            for (let i = 0; i < teamCards.length; i++) {
                const team = teams[i];
                
                // Обновляем текстовую информацию
                teamCards[i].querySelector('.team-name').textContent = team.name;
                teamCards[i].querySelector('.team-seed').textContent = team.seed;
                
                // Обновляем логотип правильным способом
                teamCards[i].querySelector('.team-logo').style.backgroundImage = `url('${team.logo}')`;
                
                // Обновляем data-атрибуты
                teamCards[i].setAttribute('data-team', team.name);
                teamCards[i].setAttribute('data-seed', team.seed);
                teamCards[i].setAttribute('data-conference', team.conference);
                teamCards[i].setAttribute('data-logo', team.logo);
                
                // Обновляем классы и обработчики
                teamCards[i].classList.remove('empty');
                teamCards[i].classList.remove('selected');
                teamCards[i].setAttribute('onclick', 'selectWinner(this)');
            }
        }
        
        // Функция сброса турнирной сетки
        function resetBracket() {
            // Сбрасываем данные
            rounds = {
                1: {
                    west: Array(4).fill(null),
                    east: Array(4).fill(null)
                },
                2: Array(4).fill(null),
                3: Array(2).fill(null),
                4: null
            };
            
            // Сбрасываем выделения в первом раунде
            const firstRoundCards = document.querySelectorAll('#round1 .team-card');
            firstRoundCards.forEach(card => {
                card.classList.remove('selected');
            });
            
            // Очищаем и заново создаем раунды
            createEmptyRound2();
            createEmptySemifinals();
            createEmptyFinal();
            
            // Скрываем чемпиона
            document.getElementById('champion-container').classList.remove('show');
            
            // Перерисовываем линии
            drawConnectors();
        }
        
        // Инициализация при загрузке страницы
        window.onload = function() {
            // Создаем пустые раунды
            createEmptyRound2();
            createEmptySemifinals();
            createEmptyFinal();
            
            // Рисуем соединительные линии
            drawConnectors();
        };
        
        // Перерисовка линий при изменении размера окна
        window.addEventListener('resize', drawConnectors);
    </script>
</body>
</html>
